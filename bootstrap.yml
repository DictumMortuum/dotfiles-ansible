#
# Assuming that the following are installed:
# - python
# - sshd
# - git clone https://github.com/kewlfft/ansible-aur.git ~/.ansible/plugins/modules/aur
#

- hosts: all
  become: yes
  roles:
    - system/setup-skel
    - system/setup-dependencies
    - { role: system/setup-known-hosts, keyscan_host: "{{ domain }}" }
    - { role: system/setup-known-hosts, keyscan_host: "github.com" }

- hosts: ldap-client
  become: yes
  roles:
    - system/setup-ldap-client

- hosts: all
  become: yes
  roles:
    - system/setup-avahi
    - { role: system/setup-zerotier, network_id: "83048a06326833ff" }
